<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightweight and User-Friendly Natural Language Processing Toolkit • textpress</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Lightweight and User-Friendly Natural Language Processing Toolkit">
<meta property="og:description" content="Provides a suite of tools for basic natural language processing tasks. Designed to be lightweight and user-friendly, it includes functionalities for text tokenization, basic text analysis, and pattern searching within text corpora. It's particularly suitable for quick analyses and for users who prefer a simple toolkit for NLP tasks.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">textpress</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level1">
<div class="page-header"><h1 id="textpress">textpress<a class="anchor" aria-label="anchor" href="#textpress"></a>
</h1></div>
<p>A lightweight, versatile NLP companion in R. Provides basic features for (1) text processing, (2) corpus search, and (3) web scraping. Additionally, the package provides utility functions for (4) building basic Retrieval-Augmented Generation (RAG) systems, as well as functionality for (5) building text embeddings via OpenAI. Ideal for users who need a basic, unobtrusive NLP tool in R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jaytimm/textpress"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
</div>
<div class="section level2">
<h2 id="web-scraping">Web scraping<a class="anchor" aria-label="anchor" href="#web-scraping"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">articles</span> <span class="op">&lt;-</span> <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/web_scrape_urls.html">web_scrape_urls</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'ChatGPT'</span>,</span>
<span>                                       input <span class="op">=</span> <span class="st">'search'</span>,</span>
<span>                                       cores <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">url</span>, <span class="va">date</span><span class="op">:</span><span class="va">title</span>, <span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="text-processing">Text processing<a class="anchor" aria-label="anchor" href="#text-processing"></a>
</h2>
<div class="section level3">
<h3 id="split-sentences">Split sentences<a class="anchor" aria-label="anchor" href="#split-sentences"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ss</span> <span class="op">&lt;-</span> <span class="va">articles</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>doc_id <span class="op">=</span> <span class="fu">row_number</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/nlp_split_sentences.html">nlp_split_sentences</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_ss</span> <span class="op">|&gt;</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="6%">
<col width="5%">
<col width="83%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">sentence_id</th>
<th align="left">text_id</th>
<th align="left">text</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1</td>
<td align="left">1.1</td>
<td align="left">On Wednesday, OpenAI announced the launch of its GPT Store—a way for ChatGPT users to share and discover custom chatbot roles called “GPTs”—and ChatGPT Team, a collaborative ChatGPT workspace and subscription plan.</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">2</td>
<td align="left">1.2</td>
<td align="left">OpenAI bills the new store as a way to “help you find useful and popular custom versions of ChatGPT” for members of Plus, Team, or Enterprise subscriptions.</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">3</td>
<td align="left">1.3</td>
<td align="left">“It’s been two months since we announced GPTs, and users have already created over 3 million custom versions of ChatGPT,” writes OpenAI in its promotional blog.</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">4</td>
<td align="left">1.4</td>
<td align="left">“Many builders have shared their GPTs for others to use.</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">5</td>
<td align="left">1.5</td>
<td align="left">Today, we’re starting to roll out the GPT Store to ChatGPT Plus, Team and Enterprise users so you can find useful and popular GPTs.”</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="tokenization">Tokenization<a class="anchor" aria-label="anchor" href="#tokenization"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokens</span> <span class="op">&lt;-</span> <span class="va">df_ss</span> <span class="op">|&gt;</span> <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/nlp_tokenize_text.html">nlp_tokenize_text</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## $`1.1`</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "On"            "Wednesday"     ","             "OpenAI"       </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "announced"     "the"           "launch"        "of"           </span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "its"           "GPT"           "Store"         "—"            </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "a"             "way"           "for"           "ChatGPT"      </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "users"         "to"            "share"         "and"          </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "discover"      "custom"        "chatbot"       "roles"        </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "called"        "\""            "GPTs"          "\""           </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [29] "—"             "and"           "ChatGPT"       "Team"         </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [33] ","             "a"             "collaborative" "ChatGPT"      </span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] "workspace"     "and"           "subscription"  "plan"         </span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [41] "."</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="search-text">Search text<a class="anchor" aria-label="anchor" href="#search-text"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_ss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/search_corpus.html">search_corpus</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">'artificial intelligence'</span>,</span>
<span>                           highlight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'&lt;b&gt;'</span>, <span class="st">'&lt;/b&gt;'</span><span class="op">)</span>,</span>
<span>                           n <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                           <span class="co">## cores = 5,</span></span>
<span>                           is_inline <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">doc_id</span><span class="op">:</span><span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>escape <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="5%">
<col width="90%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="left">sentence_id</th>
<th align="left">text</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">3</td>
<td align="left">4</td>
<td align="left">As someone studying <b>artificial intelligence</b> in education, I was curious: Could ChatGPT help?</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">3</td>
<td align="left">DOE’s decision is supposed to set the foundation for future agency uses of generative <b>artificial intelligence</b>, Chad Smith, a spokesperson for the department, told FedScoop.</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="left">2</td>
<td align="left">ChatGPT maker OpenAI finally announced on Wednesday its app store for the public to try the customized versions of its popular chatbot, ChatGPT, as the <b>artificial intelligence</b> company works to expand the reach of its flagship technology and turn it into a cash cow.</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="left">3</td>
<td align="left">The company has integrated ChatGPT, an <b>artificial intelligence</b>-based chatbot, into its IDA voice assistant, marking a new era in automotive technology.</td>
</tr>
<tr class="odd">
<td align="left">12</td>
<td align="left">1</td>
<td align="left">The field of <b>artificial intelligence</b> (AI) has witnessed a remarkable surge in innovation, with ChatGPT from OpenAI leading the charge.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="search-inline">Search inline<a class="anchor" aria-label="anchor" href="#search-inline"></a>
</h2>
<div class="section level3">
<h3 id="annotate-corpus-with-udpipe">Annotate corpus with <code>udpipe</code>
<a class="anchor" aria-label="anchor" href="#annotate-corpus-with-udpipe"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ud_annotated_corpus</span> <span class="op">&lt;-</span> <span class="fu">udpipe</span><span class="fu">::</span><span class="fu">udpipe</span><span class="op">(</span>object <span class="op">=</span> <span class="va">model</span>,</span>
<span>                                      x <span class="op">=</span> <span class="va">tokens</span>,</span>
<span>                                      tagger <span class="op">=</span> <span class="st">'default'</span>,</span>
<span>                                      parser <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="9%">
<col width="6%">
<col width="12%">
<col width="13%">
<col width="14%">
<col width="14%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="right">start</th>
<th align="right">end</th>
<th align="right">term_id</th>
<th align="left">token_id</th>
<th align="left">token</th>
<th align="left">lemma</th>
<th align="left">upos</th>
<th align="left">xpos</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1.1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">On</td>
<td align="left">on</td>
<td align="left">ADP</td>
<td align="left">IN</td>
</tr>
<tr class="even">
<td align="left">1.1</td>
<td align="right">4</td>
<td align="right">12</td>
<td align="right">2</td>
<td align="left">2</td>
<td align="left">Wednesday</td>
<td align="left">Wednesday</td>
<td align="left">PROPN</td>
<td align="left">NNP</td>
</tr>
<tr class="odd">
<td align="left">1.1</td>
<td align="right">14</td>
<td align="right">14</td>
<td align="right">3</td>
<td align="left">3</td>
<td align="left">,</td>
<td align="left">,</td>
<td align="left">PUNCT</td>
<td align="left">,</td>
</tr>
<tr class="even">
<td align="left">1.1</td>
<td align="right">16</td>
<td align="right">21</td>
<td align="right">4</td>
<td align="left">4</td>
<td align="left">OpenAI</td>
<td align="left">OpenAI</td>
<td align="left">PROPN</td>
<td align="left">NNP</td>
</tr>
<tr class="odd">
<td align="left">1.1</td>
<td align="right">23</td>
<td align="right">31</td>
<td align="right">5</td>
<td align="left">5</td>
<td align="left">announced</td>
<td align="left">announce</td>
<td align="left">VERB</td>
<td align="left">VBD</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="build-inline-text">Build inline text<a class="anchor" aria-label="anchor" href="#build-inline-text"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inline_ss</span> <span class="op">&lt;-</span> <span class="va">ud_annotated_corpus</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>inline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">token</span>, <span class="st">'/'</span>, <span class="va">xpos</span>, <span class="st">'/'</span>, <span class="va">token_id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu">separate</span><span class="op">(</span>col <span class="op">=</span> <span class="va">doc_id</span>, </span>
<span>                  into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'doc_id'</span>, <span class="st">'sentence_id'</span><span class="op">)</span>, </span>
<span>                  sep <span class="op">=</span> <span class="st">'\\.'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">doc_id</span>, <span class="va">sentence_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">inline</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">inline_ss</span><span class="op">$</span><span class="va">text</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/strwrap.html" class="external-link">strwrap</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">55</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "On/IN/1 Wednesday/NNP/2 ,/,/3 OpenAI/NNP/4"           </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [2] "announced/VBD/5 the/DT/6 launch/NN/7 of/IN/8"         </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "its/PRP$/9 GPT/NN/10 Store/NN/11 —/,/12 a/DT/13"      </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "way/NN/14 for/IN/15 ChatGPT/NNP/16 users/NNS/17"      </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "to/TO/18 share/VB/19 and/CC/20 discover/VB/21"        </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [6] "custom/JJ/22 chatbot/NN/23 roles/NNS/24 called/VBN/25"</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "\"/``/26 GPTs/NNS/27 \"/''/28 —/,/29 and/CC/30"       </span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [8] "ChatGPT/NNP/31 Team/NNP/32 ,/,/33 a/DT/34"            </span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "collaborative/JJ/35 ChatGPT/NN/36 workspace/NN/37"    </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "and/CC/38 subscription/NN/39 plan/NN/40 ././41"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="search-for-lexico-grammatical-pattern">Search for lexico-grammatical pattern<a class="anchor" aria-label="anchor" href="#search-for-lexico-grammatical-pattern"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inline_ss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/search_corpus.html">search_corpus</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">'JJ and JJ'</span>,</span>
<span>                           highlight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'&lt;b&gt;'</span>, <span class="st">'&lt;/b&gt;'</span><span class="op">)</span>,</span>
<span>                           n <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                           is_inline <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">doc_id</span><span class="op">:</span><span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">tokenizers</span><span class="fu">::</span><span class="fu">count_words</span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">75</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co">## DT::datatable(escape = F)</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>escape <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> </span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="6%">
<col width="88%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="left">sentence_id</th>
<th align="left">text</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">17</td>
<td align="left">11</td>
<td align="left">Each/DT/1 API/NN/2 has/VBZ/3 to/TO/4 be/VB/5 continuously/RB/6 <b>tested/JJ/7 and/CC/8 verified/JJ/9</b> to/TO/10 ensure/VB/11 your/PRP$/12 software/NN/13 functions/NNS/14 as/IN/15 it/PRP/16 should/MD/17 ././18</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">31</td>
<td align="left">Make/VB/1 sure/JJ/2 the/DT/3 affirmation/NN/4 is/VBZ/5 <b>achievable/JJ/6 and/CC/7 positive/JJ/8</b> ,/,/9 and/CC/10 no/RB/11 longer/RBR/12 than/IN/13 [/-LRB-/14 insert/VB/15 word/NN/16 limit/NN/17 ]/-RRB-/18 words/NNS/19 ././20 ”/’’/21</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="search-df">Search df<a class="anchor" aria-label="anchor" href="#search-df"></a>
</h2>
<blockquote>
<p>Identify sentences that contain both <code>ChatGPT</code> and <code>education</code>.</p>
</blockquote>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokens</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/nlp_cast_tokens.html">nlp_cast_tokens</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  </span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/search_df.html">search_df</a></span><span class="op">(</span>search_col <span class="op">=</span> <span class="st">'token'</span>,</span>
<span>                       id_col <span class="op">=</span> <span class="st">'text_id'</span>,</span>
<span>                       include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ChatGPT'</span>, <span class="st">'education'</span><span class="op">)</span>,</span>
<span>                       logic <span class="op">=</span> <span class="st">'and'</span>,</span>
<span>                       exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">text_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">token</span>, collapse <span class="op">=</span> <span class="st">' '</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="93%">
</colgroup>
<thead><tr class="header">
<th align="left">text_id</th>
<th align="left">text</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">3.4</td>
<td align="left">As someone studying artificial intelligence in education , I was curious : Could ChatGPT help ?</td>
</tr>
<tr class="even">
<td align="left">3.41</td>
<td align="left">My exploration of the exponential decay equation with ChatGPT symbolizes the broader challenges and opportunities presented by AI in education .</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="retrieval-augmented-generation">Retrieval-augmented generation<a class="anchor" aria-label="anchor" href="#retrieval-augmented-generation"></a>
</h2>
<div class="section level3">
<h3 id="sentence-window-retrieval">Sentence Window Retrieval<a class="anchor" aria-label="anchor" href="#sentence-window-retrieval"></a>
</h3>
<blockquote>
<p>Chunks built out of (n = <code>chunk_size</code>) sentences; context added as (n = <code>context_size</code>) sentences as window before and after chunk. Chunks (in bold-face below) are indexed in vector store for retrieval; chunks plus contexts (normal font below) serve as input to LLM.</p>
</blockquote>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chunks</span> <span class="op">&lt;-</span> <span class="va">df_ss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/rag_chunk_sentences.html">rag_chunk_sentences</a></span><span class="op">(</span>chunk_size <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                                 context_size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">99</span><span class="op">)</span></span>
<span><span class="va">chunks</span> <span class="op">|&gt;</span> <span class="fu">sample_n</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">chunk</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>escape <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="4%">
<col width="93%">
</colgroup>
<thead><tr class="header">
<th align="left">doc_id</th>
<th align="left">chunk_id</th>
<th align="left">chunk_plus_context</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">22</td>
<td align="left">22.2</td>
<td align="left">But its use isn’t reserved for workspaces and classrooms. <b>Thanks to its massive corpus of training data and sophisticated algorithms its applications are quite literally endless – creating valuable opportunities for users looking to unlock their best self in 2024, and beyond. Whether you’re in your ‘new year, new me’ era, or you simply want to build healthier habits and stick to them year-round, we’ve rounded up some of the top self-improvement prompts to feed ChatGPT this January.</b> We also offer advice on what makes a great prompt, to help you get the most out of generative AI.</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">22.13</td>
<td align="left">Some of my personal, professional, and academic goals include: [include examples of goals]. <b>Use a mixture of inspiring imagery and language, and don’t make the vision board any bigger than [insert size limit here]. “Use a neutral color palette and cursive fonts like this vision board: [insert photo of vision board here].”</b> Daily affirmations are positive mantras you repeat routinely to encourage optimism and success.</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">2.8</td>
<td align="left">I either queried for news or gave them links to news reports and asked the model to summarize them or write an article based on them. <b>I did not like the results. The articles they generate don’t follow a logical flow and I ended up restructuring the text.</b> The models sometimes repeat facts at different places or place them where they don’t make sense.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="openai-embeddings">OpenAI embeddings<a class="anchor" aria-label="anchor" href="#openai-embeddings"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vstore</span> <span class="op">&lt;-</span> <span class="va">chunks</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>words <span class="op">=</span> <span class="fu">tokenizers</span><span class="fu">::</span><span class="fu">count_words</span><span class="op">(</span><span class="va">chunk</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">words</span> <span class="op">&gt;</span> <span class="fl">20</span>, <span class="va">words</span> <span class="op">&lt;</span> <span class="fl">60</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>batch_id <span class="op">=</span> <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/rag_batch_cumsum.html">rag_batch_cumsum</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">words</span>,</span>
<span>                                                threshold <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span></span>
<span>  <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/rag_fetch_openai_embs.html">rag_fetch_openai_embs</a></span><span class="op">(</span>text_id <span class="op">=</span> <span class="st">'chunk_id'</span>,</span>
<span>                                   text <span class="op">=</span> <span class="st">'chunk'</span>,</span>
<span>                                   batch_id <span class="op">=</span> <span class="st">'batch_id'</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Batch 1 of 2"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Batch 2 of 2"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="semantic-search">Semantic search<a class="anchor" aria-label="anchor" href="#semantic-search"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q</span> <span class="op">&lt;-</span> <span class="st">'What are some concerns about the impact of</span></span>
<span><span class="st">      advanced AI models like ChatGPT?'</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/rag_fetch_openai_embs.html">rag_fetch_openai_embs</a></span><span class="op">(</span>query <span class="op">=</span> <span class="va">q</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">textpress</span><span class="fu">::</span><span class="fu"><a href="reference/search_semantics.html">search_semantics</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">query</span>,</span>
<span>                            matrix <span class="op">=</span> <span class="va">vstore</span>,</span>
<span>                            n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">chunks</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'term2'</span> <span class="op">=</span> <span class="st">'chunk_id'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">cos_sim</span><span class="op">:</span><span class="va">chunk</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="4%">
<col width="91%">
</colgroup>
<thead><tr class="header">
<th align="right">cos_sim</th>
<th align="left">doc_id</th>
<th align="left">chunk</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.877</td>
<td align="left">3</td>
<td align="left">My interaction with ChatGPT underscores the necessity for students to be equipped with the ability to challenge and question the information provided by AI. While these tools are powerful, they are not infallible.</td>
</tr>
<tr class="even">
<td align="right">0.874</td>
<td align="left">1</td>
<td align="left">As usual, our standard Ars warning about AI language models applies: “Bring your own data” for analysis, don’t rely on ChatGPT as a factual resource, and don’t rely on its outputs in ways you cannot personally confirm. OpenAI has provided more details about ChatGPT Team on its website.</td>
</tr>
<tr class="odd">
<td align="right">0.873</td>
<td align="left">16</td>
<td align="left">The issues surrounding its tendency to basically steal preexisting content will undoubtedly continue to mount for the AI company, unless they can prove that what ChatGPT is doing is indeed “fair use.” Mind Matters features original news and analysis at the intersection of artificial and natural intelligence.</td>
</tr>
<tr class="even">
<td align="right">0.869</td>
<td align="left">3</td>
<td align="left">Faced with a challenging problem, I wanted to confirm my understanding before guiding hers. As someone studying artificial intelligence in education, I was curious: Could ChatGPT help?</td>
</tr>
<tr class="odd">
<td align="right">0.865</td>
<td align="left">16</td>
<td align="left">ChatGPT, the large language model developed by OpenAI, might seem like it generates novel content, but of course we know that it partakes in what’s generally called “scraping.” It takes pre-existing material on the Internet in response to the prompt a human user inserts.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing textpress</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jason Timm <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jaytimm/textpress/actions" class="external-link"><img src="https://github.com/jaytimm/textpress/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Jason Timm.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
